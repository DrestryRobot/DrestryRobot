.. raw:: html

   <style>
      /* è®©å¤©æ°”å¡ç‰‡å±…åº•éƒ¨ä¸­å¤® */
      .weather-card {
          background: #F3F3F3; /* é€‚é…æµ…è‰²æ¨¡å¼ */
          border-radius: 16px;
          padding: 10px;
          width: 250px;
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
          transition: background 0.3s, color 0.3s;
      }

      /* è®©æ–‡å­—å±…å·¦ */
      .info {
          font-size: 16px;
          font-weight: bold;
          color: #333; /* é»˜è®¤å­—ä½“é¢œè‰² */
          margin: 10px 5px;
          text-align: left;
      }

      /* é€‚é…å¤œé—´æ¨¡å¼ */
      @media (prefers-color-scheme: dark) {
          .weather-card {
              background: #333; /* é€‚é…æ·±è‰²æ¨¡å¼ */
              color: #F3F3F3;
          }
          .info {
              color: #F3F3F3;
          }
      }
   </style>

   <script>
      function updateTime() {
          let now = new Date();
          let timeString = now.toLocaleString();
          document.getElementById("time").innerText = `â° æ—¶é—´: ${timeString}`;
      }

      // ä¸­æ–‡å›½å®¶æ˜ å°„è¡¨
      const countryMap = {
          "China": "ä¸­å›½", "United States": "ç¾å›½", "Japan": "æ—¥æœ¬",
          "Germany": "å¾·å›½", "France": "æ³•å›½", "United Kingdom": "è‹±å›½",
          "Philippines": "è²å¾‹å®¾", "India": "å°åº¦"
      };

      // è·å–ä½ç½®ï¼ˆä¸­æ–‡ï¼‰
      fetch("https://ipapi.co/json/")
         .then(response => response.json())
         .then(data => {
            let city = data.city;
            let country = countryMap[data.country] || data.country;
            document.getElementById("location").innerText = `ğŸ“ ä½ç½®: ${city}, ${country}`;

            // è·å–å¤©æ°”ä¿¡æ¯
            fetch(`https://api.open-meteo.com/v1/forecast?latitude=${data.latitude}&longitude=${data.longitude}&current_weather=true`)
               .then(response => response.json())
               .then(weatherData => {
                  let temperature = weatherData.current_weather.temperature;
                  let weatherCode = weatherData.current_weather.weathercode;

                  // æ¸©åº¦è¡¨æƒ…ç¬¦å·æ˜ å°„
                  let tempEmoji = temperature <= 0 ? "â„" :
                                  temperature <= 15 ? "ğŸ¥¶" :
                                  temperature <= 25 ? "ğŸ˜Š" :
                                  temperature <= 35 ? "ğŸ˜…" : "ğŸ”¥";

                  // å¤©æ°”ä»£ç æ˜ å°„
                  let weatherMap = {
                     0: "â˜€ æ™´æœ—", 1: "ğŸŒ¤ å¤šäº‘", 2: "â˜ é˜´å¤©", 3: "ğŸŒ§ å°é›¨",
                     45: "ğŸŒ« é›¾éœ¾", 48: "ğŸŒ« å¤§é›¾", 51: "ğŸŒ¦ å±€éƒ¨å°é›¨",
                     61: "ğŸŒ§ ä¸­é›¨", 63: "â›ˆ é›·é›¨", 71: "â„ å°é›ª", 75: "â„ æš´é›ª"
                  };

                  let weatherDescription = weatherMap[weatherCode] || "ğŸŒ å¤©æ°”æ•°æ®æœªçŸ¥";

                  document.getElementById("weather").innerText = `${tempEmoji} æ¸©åº¦: ${temperature}Â°C | ${weatherDescription}`;
               })
               .catch(error => {
                  document.getElementById("weather").innerText = `âŒ æ— æ³•è·å–å¤©æ°”ä¿¡æ¯: ${error}`;
               });
         })
         .catch(error => {
            document.getElementById("location").innerText = `âŒ æ— æ³•è·å–ä½ç½®ä¿¡æ¯: ${error}`;
         });

      // å®šæ—¶æ›´æ–°æ—¶é—´
      setInterval(updateTime, 1000);
   </script>

   <!-- å¤©æ°”ä¿¡æ¯å¡ç‰‡ -->
   <div class="weather-card">
       <p id="location" class="info">è·å–ä½ç½®ä¿¡æ¯...</p>
       <p id="time" class="info">â° æ—¶é—´åŠ è½½ä¸­...</p>
       <p id="weather" class="info">ğŸŒ¤ å¤©æ°”æ•°æ®åŠ è½½ä¸­...</p>
   </div>